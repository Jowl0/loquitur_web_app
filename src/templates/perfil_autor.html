{% extends 'base.html' %}

{% block titulo %}Loquitur - {{autor[0].nombre}}{% endblock %}

{% block content %}


<div class="container-fluid px-lg-5 px-3 pt-4 pb-2">

    <div class="row justify-content-center">
        <div class="col-12">

            <div class="card border-transparent mb-3 shadow-sm">
                <div class="card-body p-3 p-lg-4">
                    <div class="row g-0 gx-lg-5">

                        <div class="col-lg-auto mb-4 mb-lg-0 text-center">
                            <div class="card border-dark d-inline-block overflow-hidden">
                                <img src="/{{autor[0].imagen}}" class="profile-card-img d-block"
                                    alt="{{autor[0].nombre}}">
                            </div>
                        </div>

                        <div class="col-lg d-flex flex-column text-lg-start align-items-lg-start">
                            <h2
                                class="fw-bold display-6 profile-display-mobile mt-0 mb-3 d-md-flex justify-content-lg-start align-items-md-center gap-md-2 w-100">
                                <span style="line-height: 1;">{{autor[0].nombre}}</span>
                                <small class="text-muted fw-normal" style="font-size: 1rem; line-height: 1;">
                                    &bull; Miembro desde: 2024
                                </small>
                            </h2>

                            <p class="mb-4 text-muted w-100" style="font-size: 1.1rem; line-height: 1.6;">
                                {{autor[0].descripcion or 'Estudiante de la Facultad de Derecho de la UNAM, apasionado
                                por la investigación jurídica y el análisis de casos contemporáneos. Colaborador activo
                                en diversas publicaciones académicas.'}}
                            </p>

                            <div
                                class="d-flex flex-row gap-4 align-items-center mt-auto justify-content-lg-start w-100">
                                <a href="mailto:{{autor[0].email or 'correo@ejemplo.com'}}"
                                    class="text-dark fs-4 text-decoration-none transition-hover" title="Email">
                                    <i class="bi bi-envelope-fill"></i>
                                </a>
                                <a href="https://instagram.com/usuario_ejemplo" target="_blank"
                                    class="text-dark fs-4 text-decoration-none transition-hover" title="Instagram">
                                    <i class="bi bi-instagram"></i>
                                </a>
                                <a href="https://linkedin.com/in/usuario_ejemplo" target="_blank"
                                    class="text-dark fs-4 text-decoration-none transition-hover" title="LinkedIn">
                                    <i class="bi bi-linkedin"></i>
                                </a>
                                <a href="https://twitter.com/usuario_ejemplo" target="_blank"
                                    class="text-dark fs-4 text-decoration-none transition-hover" title="X (Twitter)">
                                    <i class="bi bi-twitter-x"></i>
                                </a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="mb-4">
                <nav aria-label="breadcrumb" style="--bs-breadcrumb-divider: '>';">
                    <ol class="breadcrumb mb-0">
                        <li class="breadcrumb-item"><a href="/autores"
                                class="text-decoration-none text-dark fw-bold">Autores</a></li>
                        <li class="breadcrumb-item active text-truncate" aria-current="page" style="max-width: 50vw;">
                            {{autor[0].nombre}}</li>
                    </ol>
                </nav>
            </div>

            <h3 class="fw-bold mb-4">Artículos Publicados</h3>

            {% if articulos %}
            <div id="contenedor-articulos">
                {% for art in articulos %}
                <div class="card mb-4 border border-transparent shadow-sm card-fixed-height">
                    <div class="card-body h-100 p-3">
                        <div class="row h-100">
                            <div class="col-md-3 h-100">
                                <div class="card overflow-hidden card-custom-border h-100">
                                    <div class="card-body p-0 position-relative h-100">
                                        <img src="/{{ art.imagen }}" class="img-cover-fit" alt="{{ art.titulo }}" />
                                        <a href="{{ art.slug }}" class="stretched-link"></a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-9 h-100">
                                <div class="d-flex flex-column h-100 ps-0 ps-md-3 pt-1 pt-md-0 gap-3">
                                    <h4 class="card-title fw-bold text-dark text-truncate m-0">{{ art.titulo }}</h4>
                                    <div class="d-flex align-items-center" style="position: relative; z-index: 2;">
                                        <small class="text-dark">{{ art.fecha }}</small>
                                    </div>
                                    <p class="card-text text-body desc-truncate m-0">{{ art.descripcion }}</p>
                                    <div class="text-end mt-auto">
                                        <a href="{{ art.slug }}"
                                            class="card-link text-decoration-none fw-bold text-dark stretched-link">
                                            Leer nota <i class="bi bi-arrow-right"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            <div id="btn-container" class="text-center py-2">
                <button id="btn-ver-mas-articulos-lista-autor" data-autor="{{autor[0].id}}"
                    class="btn btn-dark px-5 rounded-pill" data-url="/api/ver_mas">
                    Ver más artículos
                </button>
            </div>
            <div id="alert-container" class="mt-3"></div>

            {% else %}
            <div class="row">
                <div class="col-12">
                    <div class="alert alert-danger text-center p-5">
                        <p class="fs-5 mb-2"><strong>¡Lo sentimos!</strong> No se encontraron artículos publicados.</p>
                        <div class="mt-4">
                            <img src="{{ url_for('static', filename='no_content.jpg') }}" alt="Sin contenido"
                                class="img-fluid rounded" style="max-height: 300px; width: auto;">
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/ver_mas_articulos_lista_autor_boton.js') }}"></script>

{% endblock %}